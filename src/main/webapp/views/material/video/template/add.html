·<div class="fsh-pop">
    <div id="add_form" class="layui-form">
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label"><i>*</i>标题</label>
            <div class="layui-input-block">
                <input name="title" maxlength="20" lay-verify="required" placeholder="请输入内容" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label"><i>*</i>上传<br>(推荐mp4)</label>
            <div class="layui-input-block">
                <input type="hidden" name="path" id="add_path" value="">
                <div class="layui-upload-drag" id="uploader">
                    <i class="layui-icon"></i>
                    <p>点击上传，或将文件拖拽到此处</p>
                </div>
                <button ></button>
            </div>
        </div>
    </div>
</div>
<script>
    layui.use(['layer',"upload"], function () {
        var upload = layui.upload;
        var uploader = upload.render({
            elem: '#uploader',
            url: '/views/test/up-video.json',
            size: 20480,
            exts:"mp4|ogg|webm",
            before: function(){
                showLoading();
            },
            done: function(result){
                if (result.success) {
                    layer.closeAll('loading');
                    $("#uploader").html("<i class='iconfont icon-bofang' data-src='"+result.data.src+"'></i><p>点击播放预览，点击空白处或将文件拖拽到此处重新上传</p>");
                    $("#add_path").val(result.data.src);
                } else {
                    layer.msg(result.msg || "上传接口异常");
                }
            },
            error: function(){
                layer.closeAll('loading');
                layer.msg(result.msg || "上传接口异常");
            }
        });

        // 播放
        $("#uploader").on("click",".icon-bofang",function () {
            popvideo($(this).attr("data-src"));
            return false
        });
    })
</script>